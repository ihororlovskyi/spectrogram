<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Spectrogram on WebGL</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/src/style.css">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
</head>
<body class="bg-neutral-700">

  <div id="video">
    <!-- <header class="fixed top-0 left-0 w-full z-50 bg-white/50 h-20 flex items-center justify-center">
      <h1 class="font-quicksand text-xl font-bold uppercase tracking-widest text-gray-900">
        Spectrogram
      </h1>
    </header> -->

    <!-- <header class="fixed top-0 left-0 w-full z-50 h-20 flex items-center justify-center">
      <h1 class="font-quicksand text-xl font-bold uppercase tracking-widest text-white">
        Spectrogram
      </h1>
    </header> -->

    <!-- Main layout container: 85% for spectrogram+artwork, 15% for waveform -->
    <div class="flex w-full flex-1 gap-1.5">
      <!-- Left panel: Album cover and track info (30%) -->
      <div id="artwork" class="w-[30%] bg-neutral-900 flex flex-col items-center justify-center gap-1.5 rounded-lg">
        <div class="px-1.5 mb-4">
          <img src="https://dugbgewuzowoogglccue.supabase.co/storage/v1/object/sign/spectrogram/irukanji/MKRL019-3000-100perc.jpg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV82MjI0ZmMwZi0xZDI3LTQ0ZDItOWI3YS1lZTU2M2NjOGU4ZTAiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJzcGVjdHJvZ3JhbS9pcnVrYW5qaS9NS1JMMDE5LTMwMDAtMTAwcGVyYy5qcGciLCJpYXQiOjE3NjgwNzIzNTEsImV4cCI6MTc5OTYwODM1MX0.xd2gux-vRy5hPOzNigFwscmr6pxzaWWg5TWHmhHPgXQ" alt="Album cover" class="w-full h-auto rounded-lg shadow-lg">
        </div>
        <div class="text-center text-white">
          <h2 class="text-lg text-gray-400">Percentage Of Yes-ness</h2>
          <p class="text-lg text-gray-200 mb-4">Irukanji</p>
          <p class="text-sm text-gray-600">Irukanji • Springwald</p>
          <p class="text-xs text-gray-600">© 2024 Moon Koradji Records</p>
        </div>
      </div>

      <!-- Right panel: Spectrogram canvas (70%) -->
      <canvas id="spectrogram" class="w-[70%] h-full rounded-lg"></canvas>
    </div>

    <!-- Waveform canvas (15% height) -->
    <canvas id="waveform" class="w-full h-[15%] z-20 rounded-lg"></canvas>
  </div>

    <!-- Control Panel -->
    <main class="absolute top-4 right-4 z-40">
      <button id="menu-button" class="p-2 text-white bg-black/55 backdrop-blur border border-white/10 rounded-lg hover:text-gray-300 transition text-base leading-none cursor-pointer" style="display: none;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
      </button>

      <div id="controlPanel" class="relative p-2 text-white leading-none bg-black/55 backdrop-blur border border-white/10 rounded-lg w-full max-w-64 text-xs">

          <button id="toggleControlBtn" class="absolute top-2 right-2 text-white hover:text-gray-300 transition text-base leading-none bg-none border-none cursor-pointer p-0 w-4 h-4">
            ✕
          </button>

          <div class="">
            <div id="statusMessage" class="mb-1.5 text-xs text-neutral-400">
              Select an audio file to start
            </div>
            <div id="drag-drop-zone" class="mb-2 p-2 rounded border-2 border-dashed border-gray-600 text-center text-xs text-neutral-400 cursor-pointer hover:border-gray-400 hover:text-gray-300 hover:bg-white/5 transition">
              Drag & drop audio here
            </div>
            <div class="flex flex-wrap gap-1.5 items-center mb-2">
              <input type="file" id="audioFile" accept="audio/*" class="hidden">

              <button id="playPauseBtn" disabled class="cursor-pointer px-2 py-0.5 bg-green-500/60 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/40 hover:bg-green-500/80 hover:border-white/60 active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-green-500/80">
                Play
              </button>
            </div>

              <div class="flex flex-wrap gap-1.5 mb-1.5 items-center">
                <span class="text-white/40">Irukanji</span>

                <button id="playIrukanji001Btn" class="cursor-pointer px-2 py-0.5 bg-purple-500/60 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/40 hover:bg-purple-500/80 hover:border-white/60 active:scale-[0.98]">
                  001
                </button>

                <button id="playIrukanjiBtn" class="cursor-pointer px-2 py-0.5 bg-purple-500/60 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/40 hover:bg-purple-500/80 hover:border-white/60 active:scale-[0.98]">
                  047
                </button>
              </div>

              <div class="flex flex-wrap gap-1.5 mb-1.5 items-center">
                <span class="text-white/40">Gaz Mask</span>
                <button id="playGazMaskBtn" class="cursor-pointer px-2 py-0.5 bg-purple-500/60 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/40 hover:bg-purple-500/80 hover:border-white/60 active:scale-[0.98]">
                  01
                </button>

                <button id="playGazMask04Btn" class="cursor-pointer px-2 py-0.5 bg-purple-500/60 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/40 hover:bg-purple-500/80 hover:border-white/60 active:scale-[0.98]">
                  04
                </button>
              </div>

            <div class="mb-1.5 text-xs text-neutral-400">
              Colormap:
            </div>
            <div class="flex flex-wrap gap-1.5 mb-1.5">
              <button id="themeBlackWhiteBtn" class="cursor-pointer px-2 py-0.5 bg-orange-500/80 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/60 active:scale-[0.98]">
                Gray
              </button>

              <button id="themeRainbowBtn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                Rainbow
              </button>

              <button id="themeInfernoBtn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                Inferno
              </button>

              <button id="themeForestBtn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                Forest
              </button>

              <button id="themeMountainsBtn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                Mountains
              </button>
            </div>

            <div class="mb-1.5 text-xs text-neutral-400">
              Scale:
            </div>
            <div class="flex flex-wrap gap-1.5 mb-1.5">
              <button id="scaleLogBtn" class="cursor-pointer px-2 py-0.5 bg-orange-500/80 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/60 active:scale-[0.98]">
                Log
              </button>

              <button id="scaleMelBtn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                Mel
              </button>

              <button id="scaleLinearBtn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                Linear
              </button>
            </div>

            <div class="mb-1.5 text-xs text-neutral-400">
              Bins:
            </div>
            <div class="flex flex-wrap gap-1.5 mb-1.5">
              <button id="increaseFreqBinsBtn" class="cursor-pointer px-2 py-0.5 bg-cyan-500/60 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/40 hover:bg-cyan-500/80 hover:border-white/60 active:scale-[0.98]">
                Bins x2
              </button>

              <button id="decreaseFreqBinsBtn" class="cursor-pointer px-2 py-0.5 bg-cyan-500/60 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/40 hover:bg-cyan-500/80 hover:border-white/60 active:scale-[0.98]">
                Bins ÷2
              </button>
            </div>

            <div class="mb-1.5 text-xs text-neutral-400">
              Camera:
            </div>
            <div class="flex flex-wrap gap-1.5 mb-1.5">
              <button id="camera180270Btn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                -180, 270, 90
              </button>

              <button id="camera135270Btn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                -135, 270, 90
              </button>

              <button id="resetCameraBtn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                -45, -45, 0
              </button>

              <button id="camera000Btn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                0, 0, 0
              </button>

              <button id="camera45900Btn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                -45, 90, 0
              </button>

              <button id="camera451800Btn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                -45, 180, 0
              </button>
            </div>

            <div class="mb-1.5 text-xs text-neutral-400">
              Rotate:
            </div>
            <div class="flex flex-wrap gap-1.5 mb-1.5 items-center">
              <span>X</span>
              <button id="rotateXMinus90Btn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                -45°
              </button>

              <button id="rotateXPlus90Btn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                +45°
              </button>

              <span>Y</span>
              <button id="rotateYMinus45Btn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                -45°
              </button>

              <button id="rotateYPlus45Btn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                +45°
              </button>

              <span>Z</span>
              <button id="rotateZMinus90Btn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                -45°
              </button>

              <button id="rotateZPlus90Btn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                +45°
              </button>
            </div>

            <div class="mb-1.5 text-xs text-neutral-400">
              Flip:
            </div>
            <div class="flex flex-wrap gap-1.5 mb-1.5">
              <button id="flipXBtn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                Flip X
              </button>

              <button id="flipYBtn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                Flip Y
              </button>

              <button id="flipZBtn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                Flip Z
              </button>
            </div>

            <div class="mb-1.5 text-xs text-neutral-400">
              Display:
            </div>
            <div class="flex flex-wrap gap-1.5 mb-1.5">
              <button id="toggleWaveformBtn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                Show Waveform
              </button>

              <button id="toggleAxesBtn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                Show Axes
              </button>

              <button id="toggleGridBtn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                Show X Grid
              </button>

              <button id="toggleYGridBtn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                Show Y Grid
              </button>

              <button id="toggleZGridBtn" class="cursor-pointer px-2 py-0.5 bg-white/10 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/20 hover:bg-white/20 hover:border-white/40 active:scale-[0.98]">
                Show Z Grid
              </button>
            </div>

            <div class="mb-1.5 text-xs text-neutral-400">
              Zoom:
            </div>
            <div class="flex flex-wrap gap-1.5 mb-1.5">
              <button id="zoomX1Btn" class="cursor-pointer px-2 py-0.5 bg-blue-500/60 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/40 hover:bg-blue-500/80 hover:border-white/60 active:scale-[0.98]">
                X1
              </button>

              <button id="zoomX2Btn" class="cursor-pointer px-2 py-0.5 bg-blue-500/60 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/40 hover:bg-blue-500/80 hover:border-white/60 active:scale-[0.98]">
                X2
              </button>

              <button id="zoomX3Btn" class="cursor-pointer px-2 py-0.5 bg-blue-500/60 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/40 hover:bg-blue-500/80 hover:border-white/60 active:scale-[0.98]">
                X3
              </button>

              <button id="zoomX4Btn" class="cursor-pointer px-2 py-0.5 bg-blue-500/60 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/40 hover:bg-blue-500/80 hover:border-white/60 active:scale-[0.98]">
                X4
              </button>

              <button id="zoomX5Btn" class="cursor-pointer px-2 py-0.5 bg-blue-500/60 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/40 hover:bg-blue-500/80 hover:border-white/60 active:scale-[0.98]">
                X5
              </button>

              <button id="zoomX6Btn" class="cursor-pointer px-2 py-0.5 bg-blue-500/60 text-xs text-white rounded-lg transition-all duration-200 backdrop-blur-sm border border-white/40 hover:bg-blue-500/80 hover:border-white/60 active:scale-[0.98]">
                X6
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>

  <script type="module" src="/src/main.js"></script>
</body>
</html>
